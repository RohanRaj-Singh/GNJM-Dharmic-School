import{r as m,j as t,L as x,u as p}from"./app-DTPqrqzE.js";import{S as f}from"./SimpleLayout-wfPLQVAw.js";import{u as h}from"./useRoles-lKscFC3X.js";function N({students:l}){const[r,o]=m.useState(""),[a,c]=m.useState("gurmukhi"),{isAccountant:u}=h(),n=(e,s)=>{const i=String(e??"").trim().toLowerCase();return i?i===s||i.includes(s):!1},d=l.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));return t.jsxs(f,{title:"Students",children:[u&&t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("button",{onClick:()=>c("gurmukhi"),className:`px-3 py-1 rounded-full text-sm font-medium border
                            ${a==="gurmukhi"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,children:"Gurmukhi"}),t.jsx("button",{onClick:()=>c("kirtan"),className:`px-3 py-1 rounded-full text-sm font-medium border
                            ${a==="kirtan"?"bg-purple-600 text-white":"bg-white text-gray-700"}`,children:"Kirtan"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-end",children:t.jsx(x,{href:"/students/create",className:`bg-blue-600 text-white px-4 py-2 rounded-lg
                                   hover:bg-blue-700 active:scale-95 transition
                                   w-full text-center`,children:"+ Add Student"})}),t.jsx("input",{type:"text",placeholder:"Search student...",value:r,onChange:e=>o(e.target.value),className:`w-full border rounded-lg px-3 py-2
                               focus:outline-none focus:ring`}),d.filter(e=>u?(e.enrollments??[]).some(i=>n(i.school_class?.type??i.schoolClass?.type,a)):!0).slice().reverse().map(e=>t.jsx(g,{student:e,classFilter:u?a:null},e.id)),d.length===0&&t.jsx("p",{className:"text-center text-gray-500 text-sm",children:"No students found"})]})]})}function g({student:l,classFilter:r}){const{isTeacher:o}=h(),{auth:a}=p().props,c=l.enrollments??[],u=o?a.user.sections.map(e=>String(e.id)):null;let n=o?c.filter(e=>u.includes(String(e.section_id))):c;r&&(n=n.filter(e=>{const s=String(e.school_class?.type??e.schoolClass?.type??"").trim().toLowerCase();return s===r||s.includes(r)}));const d=n.some(e=>e.student_type==="paid");return t.jsxs(x,{href:`/students/${l.id}`,className:`block bg-white rounded-xl shadow p-4
                       active:scale-[0.98] transition
                       focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:l.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Father: ",l.father_name]})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${d?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:d?"Paid":"Free"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 text-xs",children:[n.map(e=>{const s=e.school_class?.type==="kirtan";return t.jsxs("span",{className:`px-2 py-1 rounded-full font-medium
                                ${s?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[e.school_class.name," â€” ",e.section.name]},e.id)}),o&&n.length===0&&t.jsx("span",{className:"text-gray-400 italic",children:"No accessible enrollments"})]})]})}export{N as default};
