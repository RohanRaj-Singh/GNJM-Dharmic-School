import{r as c,j as e}from"./app-DJfHBbO4.js";import{S as b}from"./SimpleLayout-nCTIb97u.js";function N({enrollments:n}){const[t,d]=c.useState(0),[i,a]=c.useState({}),[l,o]=c.useState({});if(n.length===0)return e.jsx(b,{title:"Attendance",children:e.jsx("p",{className:"text-center text-gray-500",children:"No students found for attendance."})});const s=n[t],x=s.student,h=s.school_class.type,r=u=>{const m={student_section_id:s.id,date:new Date().toISOString().slice(0,10),present:u==="present",lesson_learned:h==="kirtan"&&u==="present"?l[s.id]??!0:null};a({...i,[s.id]:m}),fetch("/attendance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(m)}),t<n.length-1&&d(t+1)},g=()=>{t>0&&d(t-1)},p=t>=n.length;return e.jsx(b,{title:"Attendance",children:p?e.jsx(j,{attendance:i}):e.jsxs("div",{className:`bg-white rounded-xl shadow p-6 text-center\r
                     transition-all duration-300 ease-in-out`,children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Student ",t+1," of ",n.length]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${(t+1)/n.length*100}%`}})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:x.name}),e.jsxs("p",{className:"text-gray-500 mb-6",children:["Father: ",x.father_name]}),h==="kirtan"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Lesson Learned?"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>o({...l,[s.id]:!0}),className:`px-4 py-2 rounded-lg border ${l[s.id]!==!1?"bg-green-600 text-white":"bg-white"}`,children:"Yes"}),e.jsx("button",{onClick:()=>o({...l,[s.id]:!1}),className:`px-4 py-2 rounded-lg border ${l[s.id]===!1?"bg-red-600 text-white":"bg-white"}`,children:"No"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"button",onClick:()=>r("present"),className:"w-full bg-green-600 text-white py-3 rounded-lg text-lg",children:"Present"}),e.jsx("button",{type:"button",onClick:()=>r("absent"),className:"w-full bg-red-600 text-white py-3 rounded-lg text-lg",children:"Absent"}),e.jsx("button",{type:"button",onClick:()=>r("leave"),className:"w-full bg-yellow-500 text-white py-3 rounded-lg text-lg",children:"Leave"})]}),e.jsx("div",{className:"flex justify-between mt-6",children:e.jsx("button",{onClick:g,disabled:t===0,className:"text-sm text-gray-600 disabled:opacity-40",children:"â† Previous"})})]},s.id)})}function j({attendance:n}){const t=Object.values(n),d=t.filter(a=>a.present).length,i=t.filter(a=>a.present===!1).length;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Attendance Completed"}),e.jsxs("div",{className:"space-y-2 text-lg",children:[e.jsxs("p",{className:"text-green-600",children:["Present: ",d]}),e.jsxs("p",{className:"text-red-600",children:["Absent: ",i]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 bg-blue-600 text-white py-3 px-6 rounded-lg",children:"Done"})]})}export{N as default};
