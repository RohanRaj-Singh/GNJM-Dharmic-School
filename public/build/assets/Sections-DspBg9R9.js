import{u as k,r as x,z as g,j as t,L as b}from"./app-DdEuiNui.js";import{S as j}from"./SimpleLayout-BiFMnZSm.js";import{u as N}from"./useRoles-B4bJ-Ns8.js";function v({sections:n=[]}){const{isAccountant:i}=N(),{flash:s}=k().props;x.useEffect(()=>{s?.error&&g.error(s.error),s?.success&&g.success(s.success)},[s]);const[a,l]=x.useState("gurmukhi"),o=e=>e?.school_class??e?.schoolClass??null,c=e=>{const r=String(e?.type??"").trim().toLowerCase(),m=String(e?.name??"").trim().toLowerCase(),d=`${r} ${m}`.trim();return d?d.includes("kirtan")?"kirtan":d.includes("gurmukhi")?"gurmukhi":"":""},h=x.useMemo(()=>i?n.filter(e=>c(o(e))===a):n,[n,a,i]),u=new Date().getDay()===0,f=e=>{const r=c(o(e));return r==="gurmukhi"?!u:r==="kirtan"?u:!0},y=e=>{const r=c(o(e));return r==="gurmukhi"&&u?"Gurmukhi attendance is closed on Sunday":r==="kirtan"&&!u?"Kirtan attendance opens only on Sunday":""};return t.jsxs(j,{title:"Select Section",children:[i&&t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx(p,{active:a==="gurmukhi",onClick:()=>l("gurmukhi"),color:"blue",children:"Gurmukhi"}),t.jsx(p,{active:a==="kirtan",onClick:()=>l("kirtan"),color:"purple",children:"Kirtan"})]}),t.jsxs("div",{className:"space-y-3",children:[h.map(e=>{const r=f(e),m=y(e);return r?t.jsxs(b,{href:`/attendance/sections/${e.id}`,className:"block bg-white border rounded-xl p-4 hover:bg-gray-50",children:[t.jsx("p",{className:"font-semibold text-gray-800",children:o(e)?.name??"Class"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.name})]},e.id):t.jsxs("div",{className:"block bg-gray-50 border border-gray-200 rounded-xl p-4 opacity-80 cursor-not-allowed",children:[t.jsx("p",{className:"font-semibold text-gray-700",children:o(e)?.name??"Class"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.name}),t.jsx("p",{className:"text-xs text-amber-700 mt-2",children:m})]},e.id)}),h.length===0&&t.jsx("p",{className:"text-center text-sm text-gray-400",children:"No sections found"})]})]})}function p({active:n,onClick:i,color:s,children:a}){const l={blue:n?"bg-blue-600 text-white":"bg-white text-gray-700",purple:n?"bg-purple-600 text-white":"bg-white text-gray-700"};return t.jsx("button",{onClick:i,className:`px-4 py-1 rounded-full text-sm font-medium border transition ${l[s]}`,children:a})}export{v as default};
