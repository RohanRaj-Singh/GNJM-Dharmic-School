import{u as y,j as e}from"./app-BA81Vu_y.js";import{S as N}from"./SimpleLayout-CO9uc9dW.js";import{u as w}from"./useRoles-CsafxOiB.js";import v from"./FeeSection-BhV4igEI.js";function C({student:a,summary:t=[]}){const{isTeacher:r,isAccountant:h,isAdmin:m}=w(),{auth:u}=y().props,j=Array.from({length:14}).map((s,l)=>{const n=new Date;return n.setDate(n.getDate()-(13-l)),n});let d=[];if((h||m)&&(d=t.filter(s=>s.class?.toLowerCase()==="gurmukhi")),r){const s=u?.user?.sections?.map(l=>l.name)??[];d=t.filter(l=>s.includes(l.section))}return e.jsx(N,{title:"Student Summary",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Father: ",a.father_name]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5 space-y-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-700",children:"Parent Contact"}),e.jsx(g,{label:"Father Phone",number:a.father_phone}),e.jsx(g,{label:"Mother Phone",number:a.mother_phone})]}),d.map((s,l)=>{const n=Object.fromEntries((s.attendance?.recent??[]).map(c=>[c.date,c.status]));return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow p-5",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(p,{color:s.class==="Kirtan"?"purple":"blue",children:s.class}),e.jsx(p,{color:"gray",children:s.section})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5 space-y-2",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-700",children:"Attendance Summary"}),e.jsx(i,{label:"Present",value:s.attendance.present,color:"green"}),e.jsx(i,{label:"Absent",value:s.attendance.absent,color:"red"}),e.jsx(i,{label:"Leave",value:s.attendance.leave,color:"yellow"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Recent Attendance"}),e.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs",children:j.map((c,b)=>{const x=c.toISOString().slice(0,10),o=n?.[x],f=o==="present"?"bg-green-500":o==="absent"?"bg-red-500":o==="leave"?"bg-yellow-400":"bg-gray-200";return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:c.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`w-8 h-8 rounded-lg ${f}`,title:o?`${x} â€” ${o}`:`${x} â€” No record`}),e.jsx("span",{className:"text-[10px] text-gray-400",children:c.getDate()})]},`${x}-${b}`)})}),Object.keys(n).length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-3 text-center",children:"No attendance marked recently"})]}),(h||m)&&s.class?.toLowerCase()==="gurmukhi"&&e.jsx(v,{item:s,student:a})]},`${s.class}-${s.section}-${l}`)}),d.length===0&&e.jsx("div",{className:"text-center text-gray-400 text-sm",children:"No accessible records"})]})})}function p({children:a,color:t="gray"}){const r={gray:"bg-gray-100 text-gray-700",blue:"bg-blue-100 text-blue-700",green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",yellow:"bg-yellow-100 text-yellow-700",purple:"bg-purple-100 text-purple-700"};return e.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${r[t]}`,children:a})}function i({label:a,value:t,color:r}){return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:a}),e.jsx("span",{className:`font-semibold text-${r}-600`,children:t})]})}function S(a){if(!a)return null;let t=a.replace(/[^\d]/g,"");return t.startsWith("0")&&(t="92"+t.slice(1)),t.startsWith("92")&&t.length>=12?t:null}function g({label:a,number:t}){const r=S(t);return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),t?e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:`tel:${t}`,className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-xs",children:"ðŸ“ž Call"}),r?e.jsx("a",{href:`https://wa.me/${r}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-lg bg-green-600 text-white text-xs",children:"ðŸ’¬ WhatsApp"}):e.jsx("span",{className:"px-3 py-1 rounded-lg bg-gray-200 text-gray-500 text-xs",children:"ðŸ’¬ WhatsApp"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"Not added"})]})}export{C as default};
