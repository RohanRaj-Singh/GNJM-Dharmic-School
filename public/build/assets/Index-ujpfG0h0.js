import{u as m,r as d,j as e,L as x}from"./app-CRto17y-.js";import{S as h}from"./SimpleLayout-BNJLKDcg.js";import{u as p}from"./useRoles-FKE8bwU4.js";function y({students:l}){console.log(m().props);const[a,i]=d.useState(""),[r,o]=d.useState("gurmukhi"),{isAccountant:c}=p(),n=l.filter(s=>s.name.toLowerCase().includes(a.toLowerCase()));return e.jsxs(h,{title:"Students",children:[c&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>o("gurmukhi"),className:`px-3 py-1 rounded-full text-sm font-medium border
                            ${r==="gurmukhi"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,children:"Gurmukhi"}),e.jsx("button",{onClick:()=>o("kirtan"),className:`px-3 py-1 rounded-full text-sm font-medium border
                            ${r==="kirtan"?"bg-purple-600 text-white":"bg-white text-gray-700"}`,children:"Kirtan"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{href:"/students/create",className:`bg-blue-600 text-white px-4 py-2 rounded-lg
                                   hover:bg-blue-700 active:scale-95 transition
                                   w-full text-center`,children:"+ Add Student"})}),e.jsx("input",{type:"text",placeholder:"Search student...",value:a,onChange:s=>i(s.target.value),className:`w-full border rounded-lg px-3 py-2
                               focus:outline-none focus:ring`}),n.filter(s=>c?(s.enrollments??[]).some(u=>u.school_class?.type===r):!0).slice().reverse().map(s=>e.jsx(f,{student:s,classFilter:c?r:null},s.id)),n.length===0&&e.jsx("p",{className:"text-center text-gray-500 text-sm",children:"No students found"})]})]})}function f({student:l,classFilter:a}){const{isTeacher:i}=p(),{auth:r}=m().props,o=l.enrollments??[],c=i?r.user.sections.map(t=>String(t.id)):null;let n=i?o.filter(t=>c.includes(String(t.section_id))):o;a&&(n=n.filter(t=>t.school_class?.type===a));const s=n.some(t=>t.student_type==="paid");return e.jsxs(x,{href:`/students/${l.id}`,className:`block bg-white rounded-xl shadow p-4
                       active:scale-[0.98] transition
                       focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Father: ",l.father_name]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:s?"Paid":"Free"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 text-xs",children:[n.map(t=>{const u=t.school_class?.type==="kirtan";return e.jsxs("span",{className:`px-2 py-1 rounded-full font-medium
                                ${u?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[t.school_class.name," â€” ",t.section.name]},t.id)}),i&&n.length===0&&e.jsx("span",{className:"text-gray-400 italic",children:"No accessible enrollments"})]})]})}export{y as default};
