import{r as b,u as j,b as y,j as e}from"./app-B9wd75CU.js";import{S as v}from"./SimpleLayout-C029ii8w.js";import{u as _}from"./useRoles-cKKoX1-T.js";function F({classes:l}){const[a,i]=b.useState("paid"),{isTeacher:d}=_(),{auth:m}=j().props,{data:r,setData:s,post:h,processing:x}=y({name:"",father_name:"",father_phone:"",mother_phone:"",section_id:"",student_type:"paid"}),f=d?m.user.sections.map(t=>String(t.id)):null,u=d?l.map(t=>({...t,sections:t.sections.filter(n=>f.includes(String(n.id)))})).filter(t=>t.sections.length>0):l,c=u.find(t=>t.sections.some(n=>n.id===Number(r.section_id)))?.default_monthly_fee??0,g=t=>{t.preventDefault(),h("/students")};return e.jsx(v,{title:"Add Student",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(o,{label:"Student Name",value:r.name,onChange:t=>s("name",t.target.value)}),e.jsx(o,{label:"Father Name",value:r.father_name,onChange:t=>s("father_name",t.target.value)}),e.jsx(o,{label:"Father Phone",placeholder:"Optional",value:r.father_phone,onChange:t=>s("father_phone",t.target.value)}),e.jsx(o,{label:"Mother Phone",placeholder:"Optional",value:r.mother_phone,onChange:t=>s("mother_phone",t.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Section"}),e.jsxs("select",{className:"w-full mt-1 border rounded-lg px-3 py-2",value:r.section_id,onChange:t=>s("section_id",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Section"}),u.map(t=>t.sections.map(n=>e.jsxs("option",{value:n.id,children:[t.name," â€“ ",n.name]},n.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Student Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsx(p,{label:"Paid",active:a==="paid",onClick:()=>{i("paid"),s("student_type","paid")}}),e.jsx(p,{label:"Free",active:a==="free",onClick:()=>{i("free"),s("student_type","free")}})]})]}),a==="paid"&&c>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Monthly Fee"}),e.jsx("input",{type:"number",value:c,disabled:!0,className:"w-full mt-1 border rounded-lg px-3 py-2 bg-gray-100"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Default fee from class"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 text-white py-3 rounded-lg",children:"Save Student"})]})})}function o({label:l,...a}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:l}),e.jsx("input",{...a,className:"w-full mt-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring"})]})}function p({label:l,active:a,onClick:i}){return e.jsx("button",{type:"button",onClick:i,className:`px-4 py-2 rounded-lg border ${a?"bg-blue-600 text-white":"bg-white text-gray-700"}`,children:l})}export{F as default};
